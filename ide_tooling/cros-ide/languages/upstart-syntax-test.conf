# SYNTAX TEST "source.upstart" "upstart syntax highlighting"

# Copyright 2022 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# See https://github.com/PanAeon/vscode-tmgrammar-test for details

# To run this test:
#  1. install vscode-tmgrammar-test CLI tool
#  2. cd languages
#  3. vscode-tmgrammar-test -g upstart.tmLanguage.json upstart-syntax-test.conf
# It will complain about not having 'source.shell', but that's alright.

# This will be highlighted.
export SHUTDOWN_REASON
# <------ keyword.other.export.upstart
#      ^^^^^^^^^^^^^^^ variable.upstart

# No highlighting without the variable
export
# <------ - keyword.other.export.upstart

# `env KEY` is highlighted
env mykey
# <--- keyword.other.env.upstart
#   ^^^^^ variable.upstart

# `env KEY=VALUE` is highlighted
env mykey=myvalue
# <--- keyword.other.env.upstart
#   ^^^^^ variable.upstart
#        ^ keyword.operator.equals.upstart
#         ^^^^^^^ string.upstart

# no highlighting
env mykey=
# <--- - keyword.other.env.upstart

expect daemon
# <------------- keyword.other.expect.upstart

# No highlighting on incomplete stanza
expect
# <------ - keyword.other.expect.upstart

kill signal 15
# <----------- keyword.other.kill-reload.upstart
#           ^^ constant.numeric.signal.upstart

reload signal SIGINT
# <------------- keyword.other.kill-reload.upstart
#             ^^^^^^ constant.language.signal.upstart

# "SIG" prefix is not required
reload signal HUP
# <------------- keyword.other.kill-reload.upstart
#             ^^^ constant.language.signal.upstart

# incorrect signal names are not highlighted
reload signal INTTT
#             ^^^^^ - constant.language.signal.upstart

kill timeout 20
# <------------ keyword.other.kill-timeout.upstart
#            ^^ constant.numeric.upstart
